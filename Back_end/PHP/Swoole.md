# [swoole/swoole-src](https://github.com/swoole/swoole-src)

Event-driven asynchronous & concurrent & coroutine networking engine with high performance for PHP. <http://www.swoole.com/>

PHPçš„ åç¨‹ é«˜æ€§èƒ½ç½‘ç»œé€šä¿¡å¼•æ“ï¼Œä½¿ç”¨C/C++è¯­è¨€ç¼–å†™ï¼Œæä¾›äº†å¤šç§é€šä¿¡åè®®çš„ç½‘ç»œæœåŠ¡å™¨å’Œå®¢æˆ·ç«¯æ¨¡å—

* ä¸€ä¸ªå¼‚æ­¥å¹¶è¡Œçš„é€šä¿¡å¼•æ“ï¼Œä½œä¸º PHP çš„æ‰©å±•æ¥è¿è¡Œ
* å…¶è¿›ç¨‹æ¨¡å‹çš„è®¾è®¡ï¼Œæ—¢è§£å†³äº†å¼‚æ­¥é—®é¢˜ï¼Œåˆè§£å†³äº†å¹¶è¡Œ
* å¸¸é©»å†…å­˜ï¼Œé¿å…é‡å¤åŠ è½½å¸¦æ¥çš„æ€§èƒ½æŸè€—ï¼Œæå‡æµ·é‡æ€§èƒ½
    - è¿›ç¨‹éƒ½æ˜¯å¸¸é©»å†…å­˜çš„ï¼ŒåŒ…æ‹¬è§£æè¿‡åçš„PHPä»£ç ä¹Ÿä¼šå¸¸é©»å†…å­˜ï¼Œä¸ä¼šåå¤è§£æ
    - PHPä»£ç è§£æåéƒ½æ˜¯å¸¸é©»å†…å­˜çš„ï¼Œæ„å‘³ç€mysqlå’Œredisç­‰è¿æ¥å°†ä¼šæ˜¯é•¿è¿æ¥
* åç¨‹å¼‚æ­¥ï¼Œæé«˜å¯¹ I/O å¯†é›†å‹åœºæ™¯å¹¶å‘å¤„ç†èƒ½åŠ›
    - redis
* æ–¹ä¾¿åœ°å¼€å‘Httpã€WebSocketã€TCPã€UDP ç­‰åº”ç”¨ï¼Œå¯ä»¥ä¸ç¡¬ä»¶é€šä¿¡
    - TCP/UDP/UnixSock æœåŠ¡å™¨ç«¯
    - Http/WebSocket/Http2.0 æœåŠ¡å™¨ç«¯
    - åç¨‹ TCP/UDP/UnixSock å®¢æˆ·ç«¯
    - åç¨‹ MySQL å®¢æˆ·ç«¯
    - åç¨‹ Http/WebSocket å®¢æˆ·ç«¯
    - åç¨‹ Http2 å®¢æˆ·ç«¯
    - AsyncTask
    - æ¯«ç§’å®šæ—¶å™¨
    - åç¨‹æ–‡ä»¶è¯»å†™
* ä¼˜ç‚¹
    - Node.js çš„å¼‚æ­¥å›è°ƒ
    - Goè¯­è¨€çš„åç¨‹
    - å¯ä»¥å®ç°å¸¸é©»å†…å­˜çš„ Server ç¨‹åº
    - å¯ä»¥å®ç° TCP ã€ UDP å¼‚æ­¥ç½‘ç»œé€šä¿¡çš„ç¼–ç¨‹å¼€å‘
* ç¼ºç‚¹
    - æ— æ³•åšå¯†é›†è®¡ç®—ã€‚å½“ç„¶è¿™ä¸€ç‚¹æ˜¯phpç”šè‡³æ˜¯æ‰€æœ‰åŠ¨æ€è¯­è¨€éƒ½å­˜åœ¨çš„é—®é¢˜
    - æ›´å®¹æ˜“å†…å­˜æ³„éœ²ã€‚åœ¨å¤„ç†å…¨å±€å˜é‡ï¼Œé™æ€å˜é‡çš„æ—¶å€™ä¸€å®šè¦å°å¿ƒï¼Œè¿™ç§ä¸ä¼šè¢«GCæ¸…ç†çš„å˜é‡ä¼šå­˜åœ¨æ•´ä¸ªç”Ÿå‘½å‘¨æœŸä¸­ï¼Œå¦‚æœæ²¡æœ‰æ­£ç¡®çš„å¤„ç†ï¼Œå¾ˆå®¹æ˜“æ¶ˆè€—å®Œæ‰€æœ‰çš„å†…å­˜
* åœºæ™¯ï¼šWebSocket å³ä½¿é€šä¿¡ã€èŠå¤©ã€æ¨é€æœåŠ¡å™¨ã€RPC è¿œç¨‹è°ƒç”¨æœåŠ¡ã€ç½‘å…³ã€ä»£ç†ã€æ¸¸æˆæœåŠ¡å™¨ç­‰

## ç‰ˆæœ¬

* 4.0
    - æä¾›äº†å®Œæ•´çš„åç¨‹(Coroutine)+é€šé“(Channel)ç‰¹æ€§ï¼Œå¸¦æ¥å…¨çš„CSPç¼–ç¨‹æ¨¡å‹ã€‚åº”ç”¨å±‚å¯ä½¿ç”¨å®Œå…¨åŒæ­¥çš„ç¼–ç¨‹æ–¹å¼ï¼Œåº•å±‚è‡ªåŠ¨å®ç°å¼‚æ­¥IO
    - åº•å±‚åŠ å…¥ Hook æœºåˆ¶ï¼Œä½¿åŸç”Ÿçš„ Mysql PDOã€Redis æ“ä½œåç¨‹åŒ–
* 4.3
    - å¼‚æ­¥å›è°ƒæ¨¡å—å·²è¿‡æ—¶ï¼Œç›®å‰ä»…ä¿®å¤ BUGï¼Œä¸å†è¿›è¡Œç»´æŠ¤, ä¸”åœ¨4.3ç‰ˆæœ¬ä¸­ç§»é™¤äº†å¼‚æ­¥æ¨¡å—ã€‚è¯·ä½¿ç”¨ Coroutine åç¨‹æ¨¡å—ã€‚
* 4.4
    - æ”¯æŒ CURL åç¨‹åŒ–

## å®‰è£…

```sh
brew install openssl
brew install nghttp2

wget https://github.com/swoole/swoole-src/archive/v1.10.2.zip
tar zxvf v1.10.2.zip
cd swoole
phpize
./configure  --enable-openssl --enable-async-redis --with-php-config=/Applications/MAMP/bin/php/php7.1.0/bin/php-config    --prefix=/usr/local   CPPFLAGS="-I/usr/local/opt/openssl/include"  LDFLAGS="-L/usr/local/opt/openssl/lib" --enable-swoole-debug
./configure \
--enable-coroutine \
--enable-openssl  \
--enable-http2  \
--enable-async-redis \
--enable-sockets \
--enable-mysqlnd

// Enable openssl support, require openssl library
sudo pecl download swoole
./configure --enable-openssl --enable-http2 --enable-sockets --enable-mysqlnd -with-openssl-dir=/usr/local/Cellar/openssl/1.0.2s/

make clean && make && sudo make install  # ç¼–è¯‘åçš„æ¨¡å—åœ¨ /modules ä¸­ï¼Œå°†swoole.soæ·»åŠ åˆ°php.iniä¸­

# php.ini
extension=swoole.so

# ubuntu
sudo apt install php-pear
sudo pecl channel-update pecl.php.net
sudo pecl install swoole

cp -R /usr/local/Cellar/openssl/1.0.2o_1/include/openssl /usr/local/include # fatal error: 'openssl/ssl.h' file not found #include <openssl/ssl.h>
    # Enable http2 support, require nghttp2 library.
brew install hiredis # fatal error: 'hiredis/hiredis.h'

brew install swoole
pecl install swoole

# add swoole.ini
sudo ln -s  /etc/php/7.2/mods-available/swoole.ini 20-swoole.ini

# check
php -m | grep swoole
# æŸ¥çœ‹æ˜¯å¦æœ‰ async_redis => enabled
php --ri swoole

# nginx è½¬å‘è‡³ swoole
if (!-e $request_filebname){
  proxy_pass http://127.0.0.1:8811;
}
```

## åŸºç¡€

* å¤šè¿›ç¨‹/å¤šçº¿ç¨‹
    - äº†è§£Linuxæ“ä½œç³»ç»Ÿè¿›ç¨‹å’Œçº¿ç¨‹çš„æ¦‚å¿µ
    - äº†è§£Linuxè¿›ç¨‹/çº¿ç¨‹åˆ‡æ¢è°ƒåº¦çš„åŸºæœ¬çŸ¥è¯†
    - äº†è§£è¿›ç¨‹é—´é€šä¿¡çš„åŸºæœ¬çŸ¥è¯†ï¼Œå¦‚ç®¡é“ã€UnixSocketã€æ¶ˆæ¯é˜Ÿåˆ—ã€å…±äº«å†…å­˜
* SOCKET
    - äº†è§£SOCKETçš„åŸºæœ¬æ“ä½œå¦‚accept/connectã€send/recvã€closeã€listenã€bind
    - äº†è§£SOCKETçš„æ¥æ”¶ç¼“å­˜åŒºã€å‘é€ç¼“å­˜åŒºã€é˜»å¡/éé˜»å¡ã€è¶…æ—¶ç­‰æ¦‚å¿µ
* IOå¤ç”¨
    - äº†è§£select/poll/epoll
    - äº†è§£åŸºäºselect/epollå®ç°çš„äº‹ä»¶å¾ªç¯ï¼ŒReactoræ¨¡å‹
    - äº†è§£å¯è¯»äº‹ä»¶ã€å¯å†™äº‹ä»¶
* TCP/IPç½‘ç»œåè®®
    - äº†è§£TCP/IPåè®®
    - äº†è§£TCPã€UDPä¼ è¾“åè®®
* è°ƒè¯•å·¥å…·
    - ä½¿ç”¨ gdb è°ƒè¯•Linuxç¨‹åº
    - ä½¿ç”¨ strace è·Ÿè¸ªè¿›ç¨‹çš„ç³»ç»Ÿè°ƒç”¨
    - ä½¿ç”¨ tcpdump è·Ÿè¸ªç½‘ç»œé€šä¿¡è¿‡ç¨‹
    - å…¶ä»–Linuxç³»ç»Ÿå·¥å…·ï¼Œå¦‚psã€lsofã€topã€vmstatã€netstatã€sarã€ssç­‰

## Server

* å¼ºå¤§çš„TCP/UDP Serveræ¡†æ¶ï¼Œæ”¯æŒå¤šçº¿ç¨‹ï¼ŒEventLoopï¼Œäº‹ä»¶é©±åŠ¨ï¼Œå¼‚æ­¥ï¼ŒWorkerè¿›ç¨‹ç»„ï¼ŒTaskå¼‚æ­¥ä»»åŠ¡ï¼Œæ¯«ç§’å®šæ—¶å™¨ï¼ŒSSL/TLSéš§é“åŠ å¯†
* ç±»å‹
    - swoole_http_serveræ˜¯swoole_serverçš„å­ç±»ï¼Œå†…ç½®äº†Httpçš„æ”¯æŒ
        + é‡‡ç”¨ä¼˜ç§€çš„ Reactor æ¨¡å‹ï¼Œå¤„ç†é€Ÿåº¦å¯é€¼è¿› NGINX å¤„ç†é™æ€é¡µé¢çš„ é€Ÿåº¦
    - swoole_websocket_serveræ˜¯swoole_http_serverçš„å­ç±»ï¼Œå†…ç½®äº†WebSocketçš„æ”¯æŒ
    - swoole_redis_serveræ˜¯swoole_serverçš„å­ç±»ï¼Œå†…ç½®äº†RedisæœåŠ¡å™¨ç«¯åè®®çš„æ”¯æŒ
* é»˜è®¤ä½¿ç”¨SWOOLE_PROCESSæ¨¡å¼ï¼Œå› æ­¤ä¼šé¢å¤–åˆ›å»ºMasterå’ŒManagerä¸¤ä¸ªè¿›ç¨‹ã€‚
* TCPåè®®:æµå¼çš„ï¼Œæ•°æ®åŒ…æ²¡æœ‰è¾¹ç•Œ.åœ¨æ¥æ”¶1ä¸ªå¤§æ•°æ®åŒ…æ—¶ï¼Œå¯èƒ½ä¼šè¢«æ‹†åˆ†æˆå¤šä¸ªæ•°æ®åŒ…å‘é€ã€‚å¤šæ¬¡Sendåº•å±‚ä¹Ÿå¯èƒ½ä¼šåˆå¹¶æˆä¸€æ¬¡è¿›è¡Œå‘é€ã€‚è¿™é‡Œå°±éœ€è¦2ä¸ªæ“ä½œæ¥è§£å†³ï¼š
    - åˆ†åŒ…ï¼šServeræ”¶åˆ°äº†å¤šä¸ªæ•°æ®åŒ…ï¼Œéœ€è¦æ‹†åˆ†æ•°æ®åŒ…
    - åˆåŒ…ï¼šServeræ”¶åˆ°çš„æ•°æ®åªæ˜¯åŒ…çš„ä¸€éƒ¨åˆ†ï¼Œéœ€è¦ç¼“å­˜æ•°æ®ï¼Œåˆå¹¶æˆå®Œæ•´çš„åŒ…
    - åŸºäºTCPçš„åè®®ï¼šHTTPã€HTTPSã€FTPã€SMTPã€POP3ã€IMAPã€SSHã€Redisã€Memcacheã€MySQL
    - è‡ªå®šä¹‰ç½‘ç»œé€šä¿¡åè®®
        + EOFåè®®:æ¯ä¸ªæ•°æ®åŒ…ç»“å°¾åŠ ä¸€ä¸²ç‰¹æ®Šå­—ç¬¦è¡¨ç¤ºåŒ…å·²ç»“æŸã€‚å¦‚memcacheã€ftpã€stmpéƒ½ä½¿ç”¨\r\nä½œä¸ºç»“æŸç¬¦ã€‚å‘é€æ•°æ®æ—¶åªéœ€è¦åœ¨åŒ…æœ«å°¾å¢åŠ \r\nå³å¯ã€‚ä½¿ç”¨EOFåè®®å¤„ç†ï¼Œä¸€å®šè¦ç¡®ä¿æ•°æ®åŒ…ä¸­é—´ä¸ä¼šå‡ºç°EOFï¼Œå¦åˆ™ä¼šé€ æˆåˆ†åŒ…é”™è¯¯ã€‚
        + å›ºå®šåŒ…å¤´+åŒ…ä½“åè®®:ä¸€ä¸ªæ•°æ®åŒ…æ€»æ˜¯ç”±åŒ…å¤´+åŒ…ä½“2éƒ¨åˆ†ç»„æˆã€‚åŒ…å¤´ç”±ä¸€ä¸ªå­—æ®µæŒ‡å®šäº†åŒ…ä½“æˆ–æ•´ä¸ªåŒ…çš„é•¿åº¦ï¼Œé•¿åº¦ä¸€èˆ¬æ˜¯ä½¿ç”¨2å­—èŠ‚/4å­—èŠ‚æ•´æ•°æ¥è¡¨ç¤ºã€‚æœåŠ¡å™¨æ”¶åˆ°åŒ…å¤´åï¼Œå¯ä»¥æ ¹æ®é•¿åº¦å€¼æ¥ç²¾ç¡®æ§åˆ¶éœ€è¦å†æ¥æ”¶å¤šå°‘æ•°æ®å°±æ˜¯å®Œæ•´çš„æ•°æ®åŒ…ã€‚
            * Swooleçš„Serverå’Œå¼‚æ­¥Clientéƒ½æ˜¯åœ¨onReceiveå›è°ƒå‡½æ•°ä¸­å¤„ç†æ•°æ®åŒ…ï¼Œå½“è®¾ç½®äº†åè®®å¤„ç†åï¼Œåªæœ‰æ”¶åˆ°ä¸€ä¸ªå®Œæ•´æ•°æ®åŒ…æ—¶æ‰ä¼šè§¦å‘onReceiveäº‹ä»¶
            * åŒæ­¥å®¢æˆ·ç«¯åœ¨è®¾ç½®äº†åè®®å¤„ç†åï¼Œè°ƒç”¨ $client->recv() ä¸å†éœ€è¦ä¼ å…¥é•¿åº¦ï¼Œrecvå‡½æ•°åœ¨æ”¶åˆ°å®Œæ•´æ•°æ®åŒ…æˆ–å‘ç”Ÿé”™è¯¯åè¿”å›ã€‚
* masterè¿›ç¨‹ï¼šæ˜¯ä¸€ä¸ªåŒ…å«å¤šçº¿ç¨‹çš„è¿›ç¨‹
    - mainçº¿ç¨‹åœ¨Acceptæ–°çš„è¿æ¥åï¼Œä¼šå°†è¿™ä¸ªè¿æ¥åˆ†é…ç»™ä¸€ä¸ªå›ºå®šçš„Reactorçº¿ç¨‹ï¼Œå¹¶ç”±è¿™ä¸ªçº¿ç¨‹è´Ÿè´£ç›‘å¬æ­¤socket
        + ä¸»è¦ç”¨äºaccepté“¾æ¥ã€æ¥å—å“åº”ä¿¡å·
        + Mainçº¿ç¨‹ä¼šå°†acceptçš„é“¾æ¥æŒ‰ç…§ä¸€å®šç®—æ³•åˆ†é…ç»™Reactorçº¿ç¨‹
        + åé¢çš„ç½‘ç»œæ•°æ®IOåˆ™é Reactorçº¿ç¨‹ä¸å®¢æˆ·ç«¯å®Œæˆ
        + Reactorçº¿ç¨‹ä¼šå°†æ”¶åˆ°çš„æ•°æ®é€šè¿‡ç®¡é“çš„æ–¹å¼ä¼ é€’ç»™Workerè¿›ç¨‹(æ³¨æ„ä¸åŒ…æ‹¬Taskerè¿›ç¨‹)
    - Reactorçº¿ç¨‹ç»„
        + ä»¥å¤šçº¿ç¨‹çš„æ–¹å¼è¿è¡Œ
        + è´Ÿè´£ç»´æŠ¤å®¢æˆ·ç«¯TCPè¿æ¥ã€å¤„ç†ç½‘ç»œIOã€å¤„ç†åè®®ã€æ”¶å‘æ•°æ®
        + å®Œå…¨æ˜¯å¼‚æ­¥éé˜»å¡çš„æ¨¡å¼
            * socketå¯è¯»æ—¶è¯»å–æ•°æ®ï¼Œå¹¶è¿›è¡Œåè®®è§£æï¼Œå°†è¯·æ±‚æŠ•é€’åˆ°Workerè¿›ç¨‹
            * socketå¯å†™æ—¶å°†æ•°æ®å‘é€ç»™TCPå®¢æˆ·ç«¯
        + å…¨éƒ¨ä¸ºCä»£ç ï¼Œé™¤Start/Shudownäº‹ä»¶å›è°ƒå¤–ï¼Œä¸æ‰§è¡Œä»»ä½•PHPä»£ç 
        + å°†TCPå®¢æˆ·ç«¯å‘æ¥çš„æ•°æ®ç¼“å†²ã€æ‹¼æ¥ã€æ‹†åˆ†æˆå®Œæ•´çš„ä¸€ä¸ªè¯·æ±‚æ•°æ®åŒ…
    - æ–¹æ³•
        + onStart
        + onShutdown
* managerè¿›ç¨‹ï¼šç”±Masterè¿›ç¨‹forkå‡ºæ¥çš„ï¼Œä¸»è¦è´Ÿè´£ç®¡ç†Workerè¿›ç¨‹,åŒ…æ‹¬fork workerè¿›ç¨‹ã€ç›‘æ§workerè¿›ç¨‹çŠ¶æ€ã€é‡æ–°æ‹‰èµ·æ–°çš„workerè¿›ç¨‹ç­‰ç­‰ã€‚
    - æ–¹æ³•
        + onManagerStart
        + onManagerStop
    - ç®¡ç†
        + å­è¿›ç¨‹ç»“æŸè¿è¡Œæ—¶ï¼Œmanagerè¿›ç¨‹è´Ÿè´£å›æ”¶æ­¤å­è¿›ç¨‹ï¼Œé¿å…æˆä¸ºåƒµå°¸è¿›ç¨‹ã€‚å¹¶åˆ›å»ºæ–°çš„å­è¿›ç¨‹
        + æœåŠ¡å™¨å…³é—­æ—¶ï¼Œmanagerè¿›ç¨‹å°†å‘é€ä¿¡å·ç»™æ‰€æœ‰å­è¿›ç¨‹ï¼Œé€šçŸ¥å­è¿›ç¨‹å…³é—­æœåŠ¡
        + æœåŠ¡å™¨reloadæ—¶ï¼Œmanagerè¿›ç¨‹ä¼šé€ä¸ªå…³é—­/é‡å¯å­è¿›ç¨‹
        + Masterè¿›ç¨‹æ˜¯å¤šçº¿ç¨‹çš„ï¼Œä¸èƒ½å®‰å…¨çš„æ‰§è¡Œforkæ“ä½œ
    - workerè¿›ç¨‹
        + ç”±Managerè¿›ç¨‹forkè€Œå‡º
        + ä»¥å¤šè¿›ç¨‹æ–¹å¼è¿è¡Œ
            * å½“Workerè¿›ç¨‹å¼‚å¸¸é€€å‡ºï¼Œå¦‚å‘ç”ŸPHPçš„è‡´å‘½é”™è¯¯ã€è¢«å…¶ä»–ç¨‹åºè¯¯æ€ï¼Œæˆ–è¾¾åˆ°max_requestæ¬¡æ•°ä¹‹åæ­£å¸¸é€€å‡ºã€‚ä¸»è¿›ç¨‹ä¼šé‡æ–°æ‹‰èµ·æ–°çš„Workerè¿›ç¨‹
        + æ¥å—ç”±Reactorçº¿ç¨‹æŠ•é€’çš„è¯·æ±‚æ•°æ®åŒ…ï¼Œå¹¶æ‰§è¡ŒPHPå›è°ƒå‡½æ•°å¤„ç†æ•°æ®
        + å“åº”
            * TCPå®¢æˆ·ç«¯ï¼ŒWorkerè¿›ç¨‹å¤„ç†å®Œè¯·æ±‚åï¼Œè°ƒç”¨$server->sendä¼šå°†æ•°æ®å‘ç»™Reactorçº¿ç¨‹ï¼Œç”±Reactorçº¿ç¨‹å†å‘ç»™å®¢æˆ·ç«¯
            * UDPå®¢æˆ·ç«¯ï¼ŒWorkerè¿›ç¨‹å¤„ç†å®Œè¯·æ±‚åï¼Œè°ƒç”¨$server->sendtoä¼šç›´æ¥å‘ç»™å®¢æˆ·ç«¯ï¼Œæ— éœ€ç»è¿‡Reactorçº¿ç¨‹
        + å¯ä»¥æ˜¯å¼‚æ­¥éé˜»å¡æ¨¡å¼ï¼Œä¹Ÿå¯ä»¥æ˜¯åŒæ­¥é˜»å¡æ¨¡å¼
        + æ–¹æ³•
            * onWorkerStart
            * onWorkerStop
            * onConnect
            * onClose
            * onReceive
            * onFinish
    - TaskWorkerè¿›ç¨‹
        + ä»¥å¤šè¿›ç¨‹æ–¹å¼è¿è¡Œ
        + æ”¯æŒå®šæ—¶å™¨
        + åšä¸€äº›å¼‚æ­¥çš„æ…¢é€Ÿä»»åŠ¡ï¼Œæ¯”å¦‚webimä¸­å‘å¹¿æ’­ï¼Œå‘é€é‚®ä»¶
        + æ¥å—ç”±Workerè¿›ç¨‹é€šè¿‡swoole_server->task/taskwaitæ–¹æ³•æŠ•é€’çš„ä»»åŠ¡
        + å¤„ç†ä»»åŠ¡ï¼Œå¹¶å°†ç»“æœæ•°æ®è¿”å›ï¼ˆä½¿ç”¨swoole_server->finishï¼‰ç»™Workerè¿›ç¨‹
        + å®ç°PHPçš„æ•°æ®åº“è¿æ¥æ± ï¼Œå¼‚æ­¥é˜Ÿåˆ—ç­‰
        + å®Œå…¨æ˜¯åŒæ­¥é˜»å¡æ¨¡å¼
        + æ–¹æ³•
            * onTask
            * finsh
            * onWorkerStart
    - åº•å±‚ä¼šä¸ºWorkerè¿›ç¨‹ã€TaskWorkerè¿›ç¨‹åˆ†é…ä¸€ä¸ªå”¯ä¸€çš„ID
    - ä¸åŒçš„Workerå’ŒTaskWorkerè¿›ç¨‹ä¹‹é—´å¯ä»¥é€šè¿‡sendMessageæ¥å£(unix socket)è¿›è¡Œé€šä¿¡
* å…³ç³»
    - Reactorå°±æ˜¯nginxï¼ŒWorkerå°±æ˜¯php-fpm
    - Reactorçº¿ç¨‹å¼‚æ­¥å¹¶è¡Œåœ°å¤„ç†ç½‘ç»œè¯·æ±‚ï¼Œç„¶åå†è½¬å‘ç»™Workerè¿›ç¨‹ä¸­å»å¤„ç†
    - Reactorå’ŒWorkeré—´é€šè¿‡UnixSocketè¿›è¡Œé€šä¿¡
    - Serverå°±æ˜¯ä¸€ä¸ªå·¥å‚ï¼Œé‚£Reactorå°±æ˜¯é”€å”®ï¼Œæ¥å—å®¢æˆ·è®¢å•
    - Workerå°±æ˜¯å·¥äººï¼Œå½“é”€å”®æ¥åˆ°è®¢å•åï¼ŒWorkerå»å·¥ä½œç”Ÿäº§å‡ºå®¢æˆ·è¦çš„ä¸œè¥¿
    - TaskWorkerå¯ä»¥ç†è§£ä¸ºè¡Œæ”¿äººå‘˜ï¼Œå¯ä»¥å¸®åŠ©Workerå¹²äº›æ‚äº‹ï¼Œè®©Workerä¸“å¿ƒå·¥ä½œ
* å¤šè¿›ç¨‹ä½¿ç”¨fork()ç³»ç»Ÿè°ƒç”¨
* å¤šçº¿ç¨‹ä½¿ç”¨pthreadçº¿ç¨‹åº“
* ä½¿ç”¨äº†eventfdä½œä¸ºçº¿ç¨‹/è¿›ç¨‹é—´æ¶ˆæ¯é€šçŸ¥çš„æœºåˆ¶
* ç”¨äº†signalfdæ¥å®ç°å¯¹ä¿¡å·çš„å±è”½å’Œå¤„ç†ã€‚å¯ä»¥æœ‰æ•ˆåœ°é¿å…çº¿ç¨‹/è¿›ç¨‹è¢«ä¿¡å·æ‰“æ–­ï¼Œç³»ç»Ÿè°ƒç”¨restartçš„é—®é¢˜ã€‚åœ¨ä¸»è¿›ç¨‹ä¸­Reactor/AIOçº¿ç¨‹ä¸ä¼šæ¥å—ä»»ä½•ä¿¡å·
* è¿›ç¨‹é”™è¯¯åä¼šç»§ç»­é‡å¯

![è¿è¡Œæµç¨‹å›¾](../../_static/swoole_run_cycle.jpg "Optional title")
![è¿è¡Œæµç¨‹å›¾](../../_static/swoole_model.jpg "Optional title")
![è¿›ç¨‹/çº¿ç¨‹ç»“æ„å›¾](../../_static/swoole_server_model.jpg "Optional title")
![è¿›ç¨‹/çº¿ç¨‹ç»“æ„å›¾](../../_static/process.jpg "Optional title")

```php
# tcp/udp server,å¯å°è£…rpc
$s = new \Swoole\Server();

//http server,æ›¿ä»£fpm
$s = new \Swoole\Http\Server()

// å¼€å¯http2 æ”¯æŒ,å®ç°åŸºäºhttp2 çš„grpc
$s = new \Swoole\Http\Server()
$s->set(['open_http2_protocol' => true]);

// websocket
$s = new \Swoole\WebScoket\Server();

// ç½‘ç»œé€šä¿¡åè®®è®¾è®¡
$server->set(array(
    'open_eof_split' => true,
    'package_eof' => "\r\n",
));
$client->set(array(
    'open_eof_split' => true,
    'package_eof' => "\r\n",
));

dtruss|strace -f -p masterPid
```

## Client

TCP/UDP/UnixSocketå®¢æˆ·ç«¯ï¼Œæ”¯æŒIPv4/IPv6ï¼Œæ”¯æŒSSL/TLSéš§é“åŠ å¯†ï¼Œæ”¯æŒSSLåŒå‘è¯ä¹¦ï¼Œæ”¯æŒåŒæ­¥å¹¶å‘è°ƒç”¨ï¼Œæ”¯æŒå¼‚æ­¥äº‹ä»¶é©±åŠ¨ç¼–ç¨‹ã€‚

## Event

* EventLoop APIï¼Œè®©ç”¨æˆ·å¯ä»¥ç›´æ¥æ“ä½œåº•å±‚çš„äº‹ä»¶å¾ªç¯ï¼Œå°†socketï¼Œstreamï¼Œç®¡é“ç­‰Linuxæ–‡ä»¶åŠ å…¥åˆ°äº‹ä»¶å¾ªç¯ä¸­ã€‚
* eventloopæ¥å£ä»…å¯ç”¨äºsocketç±»å‹çš„æ–‡ä»¶æè¿°ç¬¦ï¼Œä¸èƒ½ç”¨äºç£ç›˜æ–‡ä»¶è¯»å†™

## Async

å¼‚æ­¥IOæ¥å£ï¼Œæä¾›äº†å¼‚æ­¥æ–‡ä»¶ç³»ç»ŸIOï¼Œå®šæ—¶å™¨ï¼Œå¼‚æ­¥DNSæŸ¥è¯¢ï¼Œå¼‚æ­¥MySQLç­‰APIï¼Œå¼‚æ­¥Httpå®¢æˆ·ç«¯ï¼Œå¼‚æ­¥Rediså®¢æˆ·ç«¯

* swoole_timer å¼‚æ­¥æ¯«ç§’å®šæ—¶å™¨ï¼Œå¯ä»¥å®ç°é—´éš”æ—¶é—´æˆ–ä¸€æ¬¡æ€§çš„å®šæ—¶ä»»åŠ¡
    - swoole_timer_tick é—´éš”çš„æ—¶é’Ÿæ§åˆ¶å™¨
    - swoole_timer_after æŒ‡å®šçš„æ—¶é—´åæ‰§è¡Œ
    - swoole_timer_clear åˆ é™¤å®šæ—¶å™¨
* swoole_async_read/swoole_async_write æ–‡ä»¶ç³»ç»Ÿæ“ä½œçš„å¼‚æ­¥æ¥å£
    - 4.3 å·²æ”¾å¼ƒï¼Œç”¨åç¨‹å®ç°
* MySQL
    - å‹¿åŒæ—¶ä½¿ç”¨å¼‚æ­¥å›è°ƒå’Œåç¨‹MySQL
    - swoole_mysql å·²ç§»é™¤
    - Swoole\Redis ç§»é™¤

## åç¨‹ Coroutine

* åœ¨2.0å¼€å§‹å†…ç½®åç¨‹(Coroutine)çš„èƒ½åŠ›ï¼Œæä¾›äº†å…·å¤‡åç¨‹èƒ½åŠ›IOæ¥å£ï¼ˆç»Ÿä¸€åœ¨å‘½åç©ºé—´Swoole\Coroutine*ï¼‰
    - åœ¨4.4ä¹‹å‰çš„ç‰ˆæœ¬ä¸­ï¼ŒSwooleä¸€ç›´ä¸æ”¯æŒCURLåç¨‹åŒ–ï¼Œåœ¨ä»£ç ä¸­æ— æ³•ä½¿ç”¨curlã€‚ç”±äºcurlä½¿ç”¨äº†libcurlåº“å®ç°ï¼Œæ— æ³•ç›´æ¥hookå®ƒçš„socketï¼Œ4.4ç‰ˆæœ¬ä½¿ç”¨Swoole\Coroutine\Http\Clientæ¨¡æ‹Ÿå®ç°äº†curlçš„APIï¼Œå¹¶åœ¨åº•å±‚æ›¿æ¢äº†curl_initç­‰å‡½æ•°çš„C Handlerã€‚
* åç¨‹æ˜¯å­ç¨‹åºçš„ä¸€ç§ï¼Œå¯ä»¥é€šè¿‡yieldçš„æ–¹å¼è½¬ç§»ç¨‹åºæ§åˆ¶æƒï¼Œåç¨‹ä¹‹é—´ä¸æ˜¯è°ƒç”¨è€…ä¸è¢«è°ƒç”¨è€…çš„å…³ç³»ï¼Œè€Œæ˜¯å½¼æ­¤å¯¹ç§°ã€å¹³ç­‰çš„
* ä¸ºæ¯ä¸€ä¸ªè¯·æ±‚åˆ›å»ºå¯¹åº”çš„åç¨‹ï¼Œæ ¹æ®IOçš„çŠ¶æ€æ¥åˆç†çš„è°ƒåº¦åç¨‹
* æœ‰è½»é‡ï¼Œé«˜æ•ˆï¼Œå¿«é€Ÿç­‰ç‰¹ç‚¹
    - ç”¨æˆ·æ€çº¿ç¨‹ï¼Œé‡åˆ° IO ä¸»åŠ¨è®©å‡º
    - PHP ä»£ç ä¾ç„¶æ˜¯ä¸²è¡Œæ‰§è¡Œçš„ï¼Œæ— éœ€åŠ é”
    - å¼€é”€æä½ï¼Œä»…å ç”¨å†…å­˜ï¼Œä¸å­˜åœ¨è¿›ç¨‹/çº¿ç¨‹åˆ‡æ¢å¼€é”€
    - å¹¶å‘é‡å¤§ï¼Œå•ä¸ªè¿›ç¨‹å¯å¼€å¯ 50W ä¸ªåç¨‹
    - éšæ—¶éšåœ°ï¼Œåªè¦æƒ³å¹¶å‘ï¼Œå°±è°ƒç”¨ go åˆ›å»ºæ–°åç¨‹
* å¼€å‘è€…å¯ä»¥æ— æ„ŸçŸ¥çš„ç”¨åŒæ­¥çš„ä»£ç ç¼–å†™æ–¹å¼è¾¾åˆ°å¼‚æ­¥IOçš„æ•ˆæœå’Œæ€§èƒ½ï¼Œé¿å…äº†ä¼ ç»Ÿå¼‚æ­¥å›è°ƒæ‰€å¸¦æ¥çš„ç¦»æ•£çš„ä»£ç é€»è¾‘å’Œé™·å…¥å¤šå±‚å›è°ƒä¸­å¯¼è‡´ä»£ç æ— æ³•ç»´æŠ¤
* ç”±äºåº•å±‚å°è£…äº†åç¨‹ï¼Œæ‰€ä»¥å¯¹æ¯”ä¼ ç»Ÿçš„PHPå±‚åç¨‹æ¡†æ¶ï¼Œå¼€å‘è€…ä¸éœ€è¦ä½¿ç”¨yieldå…³é”®è¯æ¥æ ‡è¯†ä¸€ä¸ªåç¨‹IOæ“ä½œï¼Œæ‰€ä»¥ä¸å†éœ€è¦å¯¹yieldçš„è¯­ä¹‰è¿›è¡Œæ·±å…¥ç†è§£ä»¥åŠå¯¹æ¯ä¸€çº§çš„è°ƒç”¨éƒ½ä¿®æ”¹ä¸ºyieldï¼Œè¿™æå¤§çš„æé«˜äº†å¼€å‘æ•ˆç‡
* å®Œå…¨æœ‰ç”¨æˆ·æ€ç¨‹åºæ§åˆ¶ï¼Œä¹Ÿè¢«ç§°ä¸ºç”¨æˆ·æ€çš„çº¿ç¨‹,ç”±ç”¨æˆ·ä»¥éæŠ¢å çš„æ–¹å¼è°ƒåº¦ï¼Œæ‰€æœ‰çš„æ“ä½œéƒ½å¯ä»¥åœ¨ç”¨æˆ·æ€å®Œæˆï¼Œåˆ›å»ºå’Œåˆ‡æ¢çš„æ¶ˆè€—æ›´ä½ã€‚è€Œä¸æ˜¯æ“ä½œç³»ç»Ÿï¼Œæ²¡æœ‰ç³»ç»Ÿè°ƒåº¦ä¸Šä¸‹æ–‡åˆ‡æ¢çš„å¼€é”€
* å®ç°
    - åŸºäºPHPç”Ÿæˆå™¨Generators\Yieldçš„æ–¹å¼å®ç°
        + æ‰€æœ‰ä¸»åŠ¨è®©å‡ºçš„é€»è¾‘éƒ½éœ€è¦yieldå…³é”®å­—ã€‚è¿™ä¼šç»™ç¨‹åºå‘˜å¸¦æ¥æå¤§çš„æ¦‚ç‡çŠ¯é”™ï¼Œå¯¼è‡´å¤§å®¶å¯¹åç¨‹çš„ç†è§£è½¬ç§»åˆ°äº†å¯¹Generatorsè¯­æ³•çš„åŸç†çš„ç†è§£ã€‚
        + ç”±äºè¯­æ³•æ— æ³•å…¼å®¹è€çš„é¡¹ç›®ï¼Œæ”¹é€ è€çš„é¡¹ç›®å·¥ç¨‹å¤æ‚åº¦å·¨å¤§ï¼Œæˆæœ¬å¤ªé«˜ã€‚
    - PHPæ‰§è¡Œéœ€è¦çš„æ‰€æœ‰çŠ¶æ€éƒ½ä¿å­˜åœ¨ä¸€ä¸ªä¸ªé€šè¿‡é“¾è¡¨ç»“æ„å…³è”çš„VMæ ˆé‡Œï¼Œæ¯ä¸ªæ ˆé»˜è®¤ä¼šåˆå§‹åŒ–ä¸º256Kï¼ŒSwooleå¯ä»¥å•ç‹¬å®šåˆ¶è¿™ä¸ªæ ˆçš„å¤§å°(åç¨‹é»˜è®¤ä¸º8k),å½“æ ˆå®¹é‡ä¸è¶³çš„æ—¶å€™ï¼Œä¼šè‡ªåŠ¨æ‰©å®¹ï¼Œä»ç„¶ä»¥é“¾è¡¨çš„å…³ç³»å…³è”æ¯ä¸ªæ ˆã€‚åœ¨æ¯æ¬¡å‡½æ•°è°ƒç”¨çš„æ—¶å€™ï¼Œéƒ½ä¼šåœ¨VM Stackç©ºé—´ä¸Šç”³è¯·ä¸€å—æ–°çš„æ ˆå¸§æ¥å®¹çº³å½“å‰ä½œç”¨åŸŸæ‰§è¡Œæ‰€éœ€ã€‚
    - æ”¹å˜åŸæœ¬phpçš„è¿è¡Œæ–¹å¼ï¼Œä¸æ˜¯åœ¨å‡½æ•°è¿è¡Œç»“æŸåˆ‡æ¢æ ˆå¸§ï¼Œè€Œæ˜¯åœ¨å‡½æ•°æ‰§è¡Œå½“å‰op_arrayä¸­é—´ä»»æ„æ—¶å€™ï¼ˆswooleå†…éƒ¨æ§åˆ¶ä¸ºé‡åˆ°IOç­‰å¾…ï¼‰ï¼Œå¯ä»¥çµæ´»åˆ‡æ¢åˆ°å…¶ä»–æ ˆå¸§ã€‚
* ä½¿ç”¨goå‡½æ•°å¯ä»¥è®©ä¸€ä¸ªå‡½æ•°å¹¶å‘åœ°å»æ‰§è¡Œ
    - ä½¿ç”¨ go()(\Swoole\Coroutine::create() çš„ç®€å†™) åˆ›å»ºä¸€ä¸ªåç¨‹
    - åœ¨ go() çš„å›è°ƒå‡½æ•°ä¸­, åŠ å…¥åç¨‹éœ€è¦æ‰§è¡Œçš„ä»£ç (éé˜»å¡ä»£ç )
* åç¨‹é€šä¿¡
    - é€šé“ï¼ˆChannelï¼‰:åœ¨Swoole4åç¨‹ä¸­ä½¿ç”¨new chanå°±å¯ä»¥åˆ›å»ºä¸€ä¸ªé€šé“ã€‚é€šé“å¯ä»¥ç†è§£ä¸ºè‡ªå¸¦åç¨‹è°ƒåº¦çš„é˜Ÿåˆ—ã€‚ä¸¤ä¸ªæ¥å£pushå’Œpop
        + pushï¼šå‘é€šé“ä¸­å†™å…¥å†…å®¹ï¼Œå¦‚æœå·²æ»¡ï¼Œå®ƒä¼šè¿›å…¥ç­‰å¾…çŠ¶æ€ï¼Œæœ‰ç©ºé—´æ—¶è‡ªåŠ¨æ¢å¤
        + popï¼šä»é€šé“ä¸­è¯»å–å†…å®¹ï¼Œå¦‚æœä¸ºç©ºï¼Œå®ƒä¼šè¿›å…¥ç­‰å¾…çŠ¶æ€ï¼Œæœ‰æ•°æ®æ—¶è‡ªåŠ¨æ¢å¤
* å»¶æ—¶ä»»åŠ¡ï¼šç”¨deferå®ç°
* éœ€è¦çš„åŠŸèƒ½åç¨‹ runtime ä¸‹è¿˜æ²¡æ”¯æŒ
    - å®˜æ–¹å’Œç¤¾åŒºå·²ç»è´¡çŒ®äº†å¾ˆå¤šåç¨‹ç‰ˆ API å¯ä¾›ä½¿ç”¨
    - å¯ä»¥ä½¿ç”¨ swoole æä¾›çš„åç¨‹ç‰ˆ client è¿›è¡Œå°è£…, å¯ä»¥å‚è€ƒ å®˜æ–¹ amqp client å°è£…, å°† socket() å‡½æ•°å®ç°çš„ tcp client, ä½¿ç”¨ swoole åç¨‹ç‰ˆ tcp client å®ç°å³å¯
* task ä¹Ÿå¯ä»¥å¼€å¯åç¨‹
* å†…éƒ¨è°ƒç”¨redis mysql,æ‰§è¡Œæ—¶é—´ä¸º max(redis, mysql)
*  swoole çš„åç¨‹ vs go çš„åç¨‹
    -  swoole çš„åç¨‹ å’Œ golangçš„è°ƒåº¦æ–¹å¼å®Œå…¨ä¸åŒï¼Œæ¯ä¸€ä¸ªè¿›ç¨‹é‡Œé¢çš„åç¨‹éƒ½æ˜¯ä¸²è¡Œæ‰§è¡Œæ‰€ä»¥æ— éœ€æ‹…å¿ƒè®¿é—®èµ„æºåŠ é”é—®é¢˜
    -  åˆ©ç”¨å¤šè¿›ç¨‹å®ç°å¹¶è¡Œ
    - åŸºç¡€çŸ¥è¯†: ç½‘ç»œç¼–ç¨‹ + åç¨‹, ä¸ä¼šå› ä¸ºä½ æ˜¯ç”¨ swoole è¿˜æ˜¯ go è€Œæœ‰æ‰€å‡å°‘, åŸºç¡€ä¸å¤§å¥½, è¡¨ç°å‡ºæ¥äº†å°±æ˜¯å­¦ç€å­¦ç€å°±å®¹æ˜“å¡ä½, æ•ˆç‡ä¸Šä¸æ¥
    - ä»¥ä¸ºå†™çš„æ˜¯ swoole, ä¸ä¸ä¸, å†™çš„æ˜¯ä¸€ä¸ªåˆä¸€ä¸ªåŠŸèƒ½çš„ API, go ä¹ŸåŒæ ·(è¦ç”¨åˆ° redis/mysql/mq, ç›¸åº”çš„ API ä½ è¿˜æ˜¯å¾—å­¦å¾—ä¼š), åŒºåˆ«åœ¨äº, swoole è¶‹åŠ¿æ˜¯åœ¨åº•å±‚å®ç°æ”¯æŒ(æ¯”å¦‚ åç¨‹runtime), è¿™æ · PHPer å¯ä»¥æ— ç¼åˆ‡æ¢è¿‡æ¥, è€Œ Gopher åˆ™éœ€è¦å­¦ä¹ ä¸€ä¸ªåˆä¸€ä¸ªåŸºäº go åç¨‹å°è£…å¥½çš„ API. å½“åˆåœ¨ PHP ä¸­å­¦ä¹ çš„è¿™äº› API, åˆ° go é‡Œé¢, ä¸€æ ·éœ€è¦å†ç†Ÿæ‚‰ä¸€é
    - æ€§èƒ½ï¼š ç”¨ swoole è¾¾ä¸åˆ°çš„æ€§èƒ½, æ¢ä¸ªè¯­è¨€, å‘µå‘µå‘µ. éš¾æ˜“ç¨‹åº¦æ’è¡Œ: åŠ æœºå™¨ < åŠ ç¨‹åºå‘˜ < åŠ è¯­è¨€.

|    å¤šè¿›ç¨‹ |å¤šçº¿ç¨‹ |åç¨‹|
| ------------- | ------------- |------------- |
|åˆ›å»º  |fork   | pthread_create | go|
|å›æ”¶ | wait   | pthread_join  |  -|
|é€šä¿¡æ–¹å¼    |IPC è¿›ç¨‹é—´é€š    |æ•°æ®åŒæ­¥/é”  |array/chan|
|èµ„æºæ¶ˆè€—   | è¿›ç¨‹åˆ‡æ¢å¼€é”€ | è¿›ç¨‹åˆ‡æ¢å¼€é”€  |éå¸¸ä½|
|å¹¶å‘èƒ½åŠ›   | æ•°ç™¾  |æ•°åƒ | 50ä¸‡|
|ç¼–ç¨‹éš¾åº¦   | å›°éš¾  |éå¸¸å›°éš¾   | å®¹æ˜“|

```php
// æ²¡æœ‰å¼€å¯åç¨‹runtime,éœ€è¦åç¨‹ç‰ˆ API
use Swoole\Coroutine as Co; // å¸¸ç”¨çš„ç¼©å†™æ–¹å¼

go(function () { // åˆ›å»ºåç¨‹, å›è°ƒå‡½æ•°ä¸­å†™éœ€è¦åœ¨åç¨‹ä¸­æ‰§è¡Œçš„ä»£ç 
    echo "daydaygo";
    Co::sleep(1); // ä¸èƒ½æ˜¯é˜»å¡ä»£ç 
});

// å¼€å¯åç¨‹runtime
\Swoole\Runtime::enableCoRoutine();
go(function () { // åˆ›å»ºåç¨‹, å›è°ƒå‡½æ•°ä¸­å†™éœ€è¦åœ¨åç¨‹ä¸­æ‰§è¡Œçš„ä»£ç 
    echo "daydaygo";
    sleep(1); // ä¸èƒ½æ˜¯é˜»å¡ä»£ç 
});

Swoole\Runtime::enableCoroutine();

go(function () {
    echo "a";
    defer(function () {
        echo "~a";
    });
    echo "b";
    defer(function () {
        echo "~b";
    });
    sleep(1);
    echo "c";
});

function Swoole\Coroutine::create(callable $function, ...$args) : int|false;
function go(callable $function, ...$args) : int|false; // çŸ­åAPI
```

## è¿›ç¨‹ Process

* è¿›ç¨‹ç®¡ç†æ¨¡å—ï¼Œå¯ä»¥æ–¹ä¾¿çš„åˆ›å»ºå­è¿›ç¨‹ï¼Œè¿›ç¨‹é—´é€šä¿¡ï¼Œè¿›ç¨‹ç®¡ç†
* PHPè‡ªå¸¦çš„pcntlï¼Œå­˜åœ¨å¾ˆå¤šä¸è¶³
    - pcntlæ²¡æœ‰æä¾›è¿›ç¨‹é—´é€šä¿¡çš„åŠŸèƒ½
    - pcntlä¸æ”¯æŒé‡å®šå‘æ ‡å‡†è¾“å…¥å’Œè¾“å‡º
    - pcntlåªæä¾›äº†forkè¿™æ ·åŸå§‹çš„æ¥å£ï¼Œå®¹æ˜“ä½¿ç”¨é”™è¯¯
    - swoole_processæä¾›äº†æ¯”pcntlæ›´å¼ºå¤§çš„åŠŸèƒ½ï¼Œæ›´æ˜“ç”¨çš„APIï¼Œä½¿PHPåœ¨å¤šè¿›ç¨‹ç¼–ç¨‹æ–¹é¢æ›´åŠ è½»æ¾
* ç‰¹æ€§ï¼š
    - åŸºäºUnix Socketå’Œsysvmsgæ¶ˆæ¯é˜Ÿåˆ—çš„è¿›ç¨‹é—´é€šä¿¡ï¼Œåªéœ€è°ƒç”¨write/readæˆ–è€…push/popå³å¯
    - æ”¯æŒé‡å®šå‘æ ‡å‡†è¾“å…¥å’Œè¾“å‡ºï¼Œåœ¨å­è¿›ç¨‹å†…echoä¸ä¼šæ‰“å°å±å¹•ï¼Œè€Œæ˜¯å†™å…¥ç®¡é“ï¼Œè¯»é”®ç›˜è¾“å…¥å¯ä»¥é‡å®šå‘ä¸ºç®¡é“è¯»å–æ•°æ®
    - é…åˆEventæ¨¡å—ï¼Œåˆ›å»ºçš„PHPå­è¿›ç¨‹å¯ä»¥å¼‚æ­¥çš„äº‹ä»¶é©±åŠ¨æ¨¡å¼
    - æä¾›äº†execæ¥å£ï¼Œåˆ›å»ºçš„è¿›ç¨‹å¯ä»¥æ‰§è¡Œå…¶ä»–ç¨‹åºï¼Œä¸åŸPHPçˆ¶è¿›ç¨‹ä¹‹é—´å¯ä»¥æ–¹ä¾¿çš„é€šä¿¡
* åœºæ™¯
    - å¤šè¿›ç¨‹å¹¶è¡Œ

```sh
pstree -p pid
```

## Buffer

å¼ºå¤§çš„å†…å­˜åŒºç®¡ç†å·¥å…·ï¼ŒåƒCä¸€æ ·è¿›è¡ŒæŒ‡é’ˆè®¡ç®—ï¼Œåˆæ— éœ€å…³å¿ƒå†…å­˜çš„ç”³è¯·å’Œé‡Šæ”¾ï¼Œè€Œä¸”ä¸ç”¨æ‹…å¿ƒå†…å­˜è¶Šç•Œï¼Œåº•å±‚å…¨éƒ¨åšå¥½äº†ã€‚

## Memory

* ä¼˜ç‚¹
    - Memoryä¸‹çš„æ¨¡å—å¯ä»¥å®‰å…¨çš„ç”¨äºå¼‚æ­¥éé˜»å¡ç¨‹åºä¸­ï¼Œä¸å­˜åœ¨ä»»ä½•IOæ¶ˆè€—
    - æ‰€æœ‰æ¨¡å—å‡ä¸ºå¤šè¿›ç¨‹å®‰å…¨çš„ï¼Œæ— éœ€æ‹…å¿ƒæ•°æ®åŒæ­¥é—®é¢˜
    - Memoryç›¸å…³æ¨¡å—å¯¹è±¡ä¸ºæœ‰é™èµ„æºï¼Œä¸å¯å¤§é‡åˆ›å»º
* Tableï¼šåŸºäºå…±äº«å†…å­˜å’Œè‡ªæ—‹é”å®ç°çš„è¶…é«˜æ€§èƒ½å†…å­˜è¡¨ã€‚å½»åº•è§£å†³çº¿ç¨‹ï¼Œè¿›ç¨‹é—´æ•°æ®å…±äº«ï¼ŒåŠ é”åŒæ­¥ç­‰é—®é¢˜ã€‚
    - swoole_tableçš„æ€§èƒ½å¯ä»¥è¾¾åˆ°å•çº¿ç¨‹æ¯ç§’è¯»å†™200Wæ¬¡
    - åº”ç”¨ä»£ç æ— éœ€åŠ é”ï¼ŒTableå†…ç½®è¡Œé”è‡ªæ—‹é”ï¼Œæ‰€æœ‰æ“ä½œå‡æ˜¯å¤šçº¿ç¨‹/å¤šè¿›ç¨‹å®‰å…¨ã€‚ç”¨æˆ·å±‚å®Œå…¨ä¸éœ€è¦è€ƒè™‘æ•°æ®åŒæ­¥é—®é¢˜ã€‚
    - æ”¯æŒå¤šè¿›ç¨‹ï¼ŒTableå¯ä»¥ç”¨äºå¤šè¿›ç¨‹ä¹‹é—´å…±äº«æ•°æ®
    - ä½¿ç”¨è¡Œé”ï¼Œè€Œä¸æ˜¯å…¨å±€é”ï¼Œä»…å½“2ä¸ªè¿›ç¨‹åœ¨åŒä¸€CPUæ—¶é—´ï¼Œå¹¶å‘è¯»å–åŒä¸€æ¡æ•°æ®æ‰ä¼šè¿›è¡Œå‘ç”ŸæŠ¢é”
* ä¼˜ç‚¹
    - è¿›ç¨‹é—´å…±äº«

## å‹æµ‹

* -c å‚æ•°ï¼Œå¹¶å‘çš„æ•°é‡ï¼Œä¼šå¯åŠ¨å¯¹åº”æ•°é‡çš„è¿›ç¨‹ç”¨äºæµ‹è¯•
* -n å‚æ•°ï¼Œè¯·æ±‚çš„æ€»æ•°é‡ï¼Œ-n 10000, -c 100ï¼Œå¹³å‡åˆ°æ¯ä¸ªå­è¿›ç¨‹çš„æ•°é‡ä¸º100
* -s å‚æ•°ï¼ŒServerçš„IP:PORT
* -f å‚æ•°ï¼Œæµ‹è¯•å•å…ƒçš„åç§°ï¼Œç›®å‰æä¾›äº†long_tcp/short_tcp/udp/websocket å‡½æ•°ï¼Œå¯ä»¥è‡ªè¡Œå®ç°å•å…ƒæµ‹è¯•å‡½æ•°

```sh
php run.php -c 100 -n 10000 -s tcp://127.0.0.1:9501 -f long_tc
```

## æœåŠ¡ä¿æŒ

* ä½¿ç”¨ä¸‹é¢çš„è„šæœ¬éœ€è¦å°†Serverç¨‹åºçš„è¿›ç¨‹åç§°è®¾ç½®ä¸ºmasterï¼Œå¦‚ cli_set_process_title("php server.php: master")
* å¯ä»¥é€šè¿‡netstat -lnp æ£€æµ‹ç«¯å£æ˜¯å¦åœ¨ç›‘å¬ï¼Œå¦‚æœæœªåœ¨ç›‘å¬ï¼Œåˆ™æ‰§è¡Œrestart
* é€šè¿‡ä¸€ä¸ªcheck.phpå‘é€ä¸€æ®µå¸¦æœ‰é€»è¾‘çš„è¯·æ±‚ï¼Œè¯•æ¢æœåŠ¡å™¨æ˜¯å¦å¯ä»¥æ­£å¸¸å·¥ä½œï¼Œå¦‚æœæ— æ³•å·¥ä½œï¼Œæ‰§è¡Œrestart
* ä½¿ç”¨supervisorç›‘æ§è¿›ç¨‹çš„å·¥å…·
* å¦‚æœåœ¨Dockerå®¹å™¨ä¸­ä½¿ç”¨ï¼Œå¯ä»¥åœ¨docker runæ—¶å¢åŠ å‚æ•°--restart=always

```sh
*/1 * * * * /data/script/check_server.sh

# /data/script/check_server.sh
count=`ps -fe |grep "server.php" | grep -v "grep" | grep "master" | wc -l`

echo $count
if [ $count -lt 1 ]; then
ps -eaf |grep "server.php" | grep -v "grep"| awk '{print $2}'|xargs kill -9
sleep 2
ulimit -c unlimited
/usr/local/bin/php /data/webroot/server.php
echo "restart";
echo $(date +%Y-%m-%d_%H:%M:%S) >/data/log/restart.log
fi
```

## MySQL

* é•¿è¿æ¥å°±å¯ä»¥é¿å…æ¯æ¬¡è¯·æ±‚éƒ½åˆ›å»ºè¿æ¥çš„å¼€é”€ï¼ŒèŠ‚çœäº†æ—¶é—´å’ŒIOæ¶ˆè€—ã€‚æå‡äº†PHPç¨‹åºçš„æ€§èƒ½ã€‚
* æ–­çº¿é‡è¿
    - mysql_queryæ‰§è¡Œåæ£€æµ‹è¿”å›å€¼
    - å¦‚æœmysql_queryè¿”å›å¤±è´¥ï¼Œæ£€æµ‹é”™è¯¯ç å‘ç°ä¸º2006/2013ï¼ˆè¿™2ä¸ªé”™è¯¯è¡¨ç¤ºè¿æ¥å¤±è´¥ï¼‰ï¼Œå†æ‰§è¡Œä¸€æ¬¡mysql_connect
    - æ‰§è¡Œmysql_connectåï¼Œé‡æ–°æ‰§è¡Œmysql_queryï¼Œè¿™æ—¶å¿…ç„¶ä¼šæˆåŠŸï¼Œå› ä¸ºå·²ç»é‡æ–°å»ºç«‹äº†è¿æ¥
    - å¦‚æœmysql_queryè¿”å›æˆåŠŸï¼Œé‚£ä¹ˆè¿æ¥æ˜¯æœ‰æ•ˆçš„ï¼Œè¿™æ˜¯ä¸€æ¬¡æ­£å¸¸çš„è°ƒç”¨
* å¼‚æ­¥
    - MySQLæ˜¯æ ¹æ®è¿æ¥æ•°åˆ†é…èµ„æºçš„ï¼Œä¸€ä¸ªMySQLè¿æ¥åŒæ—¶åªèƒ½æ‰§è¡Œ1ä¸ªSQLçº¿ç¨‹ï¼Œå¦‚æœå¼‚æ­¥MySQLå­˜åœ¨å¹¶å‘é‚£ä¹ˆå¿…é¡»åˆ›å»ºå¤šä¸ªMySQLè¿æ¥ã€‚1000è¿æ¥é‚£ä¹ˆéœ€è¦ç»´æŒ1000çº¿ç¨‹æ‰å¯ä»¥ã€‚çº¿ç¨‹æ•°é‡å¢åŠ åï¼Œçº¿ç¨‹é—´åˆ‡æ¢ä¼šå ç”¨å¤§é‡CPUèµ„æºã€‚
    - MySQLçŸ­è¿æ¥åè€Œä¸ä¼šå‡ºç°æ­¤é—®é¢˜ï¼Œå› ä¸ºçŸ­è¿æ¥åœ¨ä½¿ç”¨å®Œåå°±é‡Šæ”¾äº†ã€‚ä¸ä¼šå ç”¨MySQL-Serverçš„è¿æ¥èµ„æº
    - å¼‚æ­¥MySQLå¹¶æ²¡æœ‰èŠ‚çœSQLæ‰§è¡Œçš„æ—¶é—´
    - å¼‚æ­¥å›è°ƒç¨‹åºä¸­ï¼Œå¼‚æ­¥MySQLå¹¶æ²¡æœ‰æå‡æ€§èƒ½ã€‚å¼‚æ­¥æœ€å¤§çš„å¥½å¤„æ˜¯å¯ä»¥é«˜å¹¶å‘ï¼Œå¦‚æœå¹¶å‘1ä¸‡ä¸ªè¯·æ±‚ï¼Œé‚£ä¹ˆå°±éœ€è¦å»ºç«‹1ä¸‡ä¸ªMySQLè¿æ¥ï¼Œè¿™ä¼šç»™MySQL-Serverå¸¦æ¥å·¨å¤§çš„å‹åŠ›ã€‚
    - MySQLçŸ­è¿æ¥åè€Œä¸ä¼šå‡ºç°æ­¤é—®é¢˜ï¼Œå› ä¸ºçŸ­è¿æ¥åœ¨ä½¿ç”¨å®Œåå°±é‡Šæ”¾äº†ã€‚ä¸ä¼šå ç”¨MySQL-Serverçš„è¿æ¥èµ„æº
    - å¼‚æ­¥MySQLè¿˜å¸¦æ¥äº†é¢å¤–çš„ç¼–ç¨‹å¤æ‚åº¦ï¼Œæ‰€ä»¥é™¤éæ˜¯ç‰¹æ®Šåœºæ™¯çš„éœ€æ±‚ï¼Œå¦åˆ™ä¸å»ºè®®ä½¿ç”¨å¼‚æ­¥MySQLã€‚
    - åšæŒè¦ä½¿ç”¨å¼‚æ­¥ï¼Œé‚£ä¹ˆå¿…é¡»æ˜¯å¼‚æ­¥MySQL+è¿æ¥æ± çš„å½¢å¼ã€‚è¶…è¿‡è§„å®šçš„MySQLæœ€å¤§è¿æ¥åï¼Œåº”å½“å¯¹SQLè¯·æ±‚è¿›è¡Œæ’é˜Ÿï¼Œè€Œä¸æ˜¯åˆ›å»ºæ–°è¿æ¥ï¼Œé¿å…å¤§é‡å¹¶å‘è¯·æ±‚å¯¼è‡´MySQLæœåŠ¡å™¨å´©æºƒã€‚
* è¿æ¥æ± 
    - è¿æ¥æ± ä½¿ç”¨ä¸€ä¸ªå…±äº«èµ„æºçš„æ¨¡å¼ï¼Œå¦‚å¹¶å‘100ä¸ªè¯·æ±‚ï¼Œå®é™…ä¸Šå¹¶ä¸æ˜¯æ¯ä¸ªè¯·æ±‚çš„æ‰€æœ‰æ—¶é—´éƒ½åœ¨æ‰§è¡ŒSQLæŸ¥è¯¢ã€‚è¿™æ ·100ä¸ªè¯·æ±‚ï¼Œå…±äº«20ä¸ªMySQLè¿æ¥å°±å¯ä»¥æ»¡è¶³éœ€æ±‚äº†ã€‚å½“ä¸€ä¸ªè¯·æ±‚æ“ä½œå®Œæ•°æ®åº“åï¼Œå¼€å§‹è¿›å…¥æ¨¡æ¿æ¸²æŸ“ç­‰æµç¨‹ï¼Œè¿™æ—¶å°±ä¼šé‡Šæ”¾æ•°æ®åº“è¿æ¥ç»™å…¶ä»–çš„è¯·æ±‚ä½¿ç”¨ã€‚
    - ä»…åœ¨è¶…å¤§å‹åº”ç”¨ä¸­æ‰æœ‰ä»·å€¼
    - åŒæ­¥é˜»å¡æ¨¡å¼
        + å¯åŸºäºswooleçš„AsyncTaskæ¨¡å—å®ç°çš„è¿æ¥æ± ï¼Œç¼–ç¨‹ç®€å•ï¼Œæ²¡æœ‰æ•°æ®åŒæ­¥å’Œé”çš„é—®é¢˜ã€‚ç”šè‡³å¯ä»¥å¤šä¸ªæœåŠ¡å…±äº«è¿æ¥æ± 
        + ç¼ºç‚¹æ˜¯
            *  çµæ´»æ€§ä¸å¦‚å¤šçº¿ç¨‹è¿æ¥æ± ï¼Œæ— æ³•åŠ¨æ€å¢å‡è¿æ¥
            *  æœ‰ä¸€æ¬¡è¿›ç¨‹é—´é€šä¿¡çš„å¼€é”€

## æ˜¯å¦é˜»å¡

* åŒæ­¥é˜»å¡å‡½æ•°
    - mysqlã€mysqliã€pdoä»¥åŠå…¶ä»–DBæ“ä½œå‡½æ•°
    - sleepã€usleep
    - curl
    - streamã€socketæ‰©å±•çš„å‡½æ•°
    - swoole_clientåŒæ­¥æ¨¡å¼
    - memcacheã€redisæ‰©å±•å‡½æ•°
    - file_get_contents/freadç­‰æ–‡ä»¶è¯»å–å‡½æ•°
    - swoole_server->taskwait
    - swoole_server->sendwait
* å¼‚æ­¥éé˜»å¡å‡½æ•°
    - swoole_clientå¼‚æ­¥æ¨¡å¼
    - mysql-asyncåº“
    - redis-asyncåº“
    - swoole_timer_tick/swoole_timer_after
    - swoole_eventç³»åˆ—å‡½æ•°
    - swoole_table/swoole_atomic/swoole_buffer
    - swoole_server->task/finishå‡½æ•°

## æ•°æ®ç»“æ„

* é˜Ÿåˆ—ï¼šPHPçš„SPLæ ‡å‡†åº“ä¸­æä¾›äº†SplQueueæ‰©å±•å†…ç½®çš„é˜Ÿåˆ—æ•°æ®ç»“æ„
* å †ï¼šæ’åºåŠŸèƒ½ï¼ŒSplHeapå°±æ˜¯ä¸€ç§æœ‰åºçš„æ•°æ®ç»“æ„ã€‚æ•°æ®æ€»æ˜¯æŒ‰ç…§æœ€å°åœ¨å‰æˆ–æœ€å¤§åœ¨å‰æ’åºã€‚æ–°æ’å…¥çš„æ•°æ®ä¼šè‡ªåŠ¨è¿›è¡Œæ’åº
    - SplHeapåº•å±‚ä½¿ç”¨è·³è¡¨æ•°æ®ç»“æ„ï¼Œinsertæ“ä½œçš„æ—¶é—´å¤æ‚åº¦ä¸ºO(Log(n))

```php
$queue = new SplQueue;
//å…¥é˜Ÿ
$queue->push($data);
//å‡ºé˜Ÿ
$data = $queue->shift();
//æŸ¥è¯¢é˜Ÿåˆ—ä¸­çš„æ’é˜Ÿæ•°é‡
$n = count($queue);

# åŠŸèƒ½
$splq = new SplQueue;
for($i = 0; $i < 1000000; $i++)
{
    $data = "hello $i\n";
    $splq->push($data);

    if ($i % 100 == 99 and count($splq) > 100)
    {
        $popN = rand(10, 99);
        for ($j = 0; $j < $popN; $j++)
        {
            $splq->shift();
        }
    }
}

$popN = count($splq);
for ($j = 0; $j < $popN; $j++)
{
    $splq->pop();
}

//æœ€å¤§å †
class MaxHeap extends SplHeap
{
    protected function compare($a, $b)
    {
        return $a - $b;
    }
}

//æœ€å°å †
class MinHeap extends SplHeap
{
    protected function compare($a, $b)
    {
        return $b - $a;
    }
}

$list = new MaxHeap;
$list->insert(56);
$list->insert(22);
$list->insert(35);
$list->insert(11);
$list->insert(88);
$list->insert(36);
```

## å†…å­˜åˆ†é…

* ä¸å»ºè®®ä½¿ç”¨jemalloc, å¯èƒ½ä¼šé™ä½ç¨‹åºç¨³å®šæ€§ï¼Œå»ºè®®ä½¿ç”¨æ ‡å‡†çš„mallocå’ŒPHPå®˜æ–¹æä¾›çš„emalloc (é»˜è®¤)
* å¼‚æ­¥ç¨‹åºæ˜¯åŸºäºå›è°ƒé“¾å¼•ç”¨è®¡æ•°å®ç°å†…å­˜çš„ç®¡ç†

## æ—¥å¿—

* è®¾ç½®
    - Swoole\Server->setæ–¹æ³•
    - Swoole\Coroutine::seté™æ€æ–¹æ³•
    - Swoole\Async::seté™æ€æ–¹æ³•
* ç­‰çº§
    - SWOOLE_LOG_DEBUGï¼šè°ƒè¯•æ—¥å¿—ï¼Œä»…ä½œä¸ºå†…æ ¸å¼€å‘è°ƒè¯•ä½¿ç”¨
    - SWOOLE_LOG_TRACEï¼šè·Ÿè¸ªæ—¥å¿—ï¼Œå¯ç”¨äºè·Ÿè¸ªç³»ç»Ÿé—®é¢˜ï¼Œè°ƒè¯•æ—¥å¿—æ˜¯ç»è¿‡ç²¾å¿ƒè®¾ç½®çš„ï¼Œä¼šæºå¸¦å…³é”®æ€§ä¿¡æ¯
    - SWOOLE_LOG_INFOï¼šæ™®é€šä¿¡æ¯ï¼Œä»…ä½œä¸ºä¿¡æ¯å±•ç¤º
    - SWOOLE_LOG_NOTICEï¼šæç¤ºä¿¡æ¯ï¼Œç³»ç»Ÿå¯èƒ½å­˜åœ¨æŸäº›è¡Œä¸ºï¼Œå¦‚é‡å¯ã€å…³é—­
    - SWOOLE_LOG_WARNINGï¼šè­¦å‘Šä¿¡æ¯ï¼Œç³»ç»Ÿå¯èƒ½å­˜åœ¨æŸäº›é—®é¢˜
    - SWOOLE_LOG_ERRORï¼šé”™è¯¯ä¿¡æ¯ï¼Œç³»ç»Ÿå‘ç”Ÿäº†æŸäº›å…³é”®æ€§çš„é”™è¯¯ï¼Œéœ€è¦å³æ—¶è§£å†³

```php
$serv->set([
    'log_level' => SWOOLE_LOG_TRACE,
    'trace_flags' => SWOOLE_TRACE_ALL,
]);
```

## HTTP

* Swoole ä¸ Nginx ç»“åˆä½¿ç”¨

```
# enable-swoole-php.conf

location ~ [^ /]\.php(/ | $ ) {
	proxy_http_version 1.1 ;
    proxy_set_header Connection "keep-alive";
    proxy_set_header X - Real - IP $remote_addr ;
    proxy_pass http : //127.0.0.1:9501;
}

# list
ps - ef | grep 'swoole_process_server'| grep - v 'grep'
# worker reload
ps aux | grep swoole_process_server_master | awk '{print $2}'| xargs kill - USR1
```

## é€šä¿¡

* CSP æœ‰ä¸€å¥å¾ˆç»å…¸çš„è¯ï¼šä¸è¦é€šè¿‡å…±äº«å†…å­˜æ¥é€šä¿¡ï¼Œè€Œåº”è¯¥é€šè¿‡é€šä¿¡æ¥å…±äº«å†…å­˜

## strace

## é¡¹ç›®

* [wh469012917/swoole-vue-webim](https://github.com/wh469012917/swoole-vue-webim):ä¸€ä¸ªWebèŠå¤©åº”ç”¨ï¼ŒåŸºäºVueå’ŒSwooleæ„å»º
* [brewlin/swoft-im](https://github.com/brewlin/swoft-im):åŸºäºswoft-cloudçš„å¾®æœåŠ¡æ¶æ„ï¼Œæœ€å°åŒ–æ‹†åˆ†ç²’åº¦ï¼ŒPHP7ã€å¤šè¿›ç¨‹ã€åç¨‹ã€å¼‚æ­¥ä»»åŠ¡ã€mysqlè¿æ¥æ± ã€rediè¿æ¥æ± ã€rpcè¿æ¥æ± ã€æœåŠ¡æ²»ç†ã€æœåŠ¡æ³¨å†Œä¸å‘ç°ã€Aopåˆ‡é¢ã€å…¨æ³¨è§£ http://chat.huido.site
* [matyhtf/webim](https://github.com/matyhtf/webim):ä½¿ç”¨PHP+Swooleå®ç°çš„ç½‘é¡µå³æ—¶èŠå¤©å·¥å…·

## æ¡†æ¶

* [Tencent/tsf](https://github.com/Tencent/tsf):coroutine and Swoole based php server framework in tencent
* [bixuehujin/blink](https://github.com/bixuehujin/blink):A high performance web framework and application server in PHP. https://docs.rethinkphp.com/blink-framework/v0.4/zh-CN/
* [SwooleDistributed/SwooleDistributed](https://github.com/SwooleDistributed/SwooleDistributed):swoole åˆ†å¸ƒå¼å…¨æ ˆæ¡†æ¶
* [EasySwoole](https://github.com/easy-swoole/easyswoole):High performance Coroutine PHP Framework, base on Swoole http://easyswoole.com/
* [Swoft](https://doc.swoft.org/)
* [One](https://www.kancloud.cn/vic-one/php-one/826876)
* [mix-php/mix](https://github.com/mix-php/mix):è½»é‡ PHP æ¡†æ¶ï¼ŒåŸºäº Swoole çš„å¸¸é©»å†…å­˜å‹ PHP é«˜æ€§èƒ½æ¡†æ¶ (å¼€å‘æ–‡æ¡£å®Œå–„) http://mixphp.cn
* [matyhtf/framework](https://github.com/matyhtf/framework)PHP advanced Web development framework. The built-in application server based on the development of swoole extension
* [shenzhe/zphp](https://github.com/shenzhe/zphp)ZPHPæ˜¯ä¸€ä¸ªæè½»çš„çš„ï¼Œå®šä½äºåç½®SOAæœåŠ¡çš„æ¡†æ¶ï¼Œå¯å¼€å‘ç‹¬ç«‹é«˜æ•ˆçš„é•¿é©»æœåŠ¡ï¼Œå¹¶èƒ½é€‚åº”å¤šç«¯çš„å˜åŒ–ã€‚
* [xcl3721/Dora-RPC](https://github.com/xcl3721/Dora-RPC):DoraRPC is an RPC For the PHP MicroService by The Swoole
* [bingcool/swoolefy](https://github.com/bingcool/swoolefy):swoolefyæ˜¯ä¸€ä¸ªåŸºäºswooleæ‰©å±•å®ç°çš„è½»é‡çº§é«˜æ€§èƒ½çš„APIå’ŒMVCåº”ç”¨æœåŠ¡æ¡†æ¶
* [hyperf-cloud/hyperf](https://github.com/hyperf-cloud/hyperf):ğŸš€ A coroutine framework that focuses on hyperspeed and flexibility, specifically used for build microservices or middlewares. https://www.hyperf.io

## å·¥å…·

* [eaglewu/swoole-ide-helper](Auto completion, trigger suggest and view docs for Swoole in editor):Put the source code path into Include Path in IDE.
* [swlib/saber](https://github.com/swlib/saber):Saber, é«˜æ€§èƒ½é«˜å¯ç”¨HTTPå®¢æˆ·ç«¯ - Swooleäººæ€§åŒ–ç»„ä»¶åº“ | High performance and high availability HTTP client - Swoole Humanization Component Library 
* [LinkedDestiny/swoole-yaf](https://github.com/LinkedDestiny/swoole-yaf)
* [LinkedDestiny/swoole-thinkphp](https://github.com/LinkedDestiny/swoole-thinkphp)
* [youzan/yz_swoole](https://github.com/youzan/yz_swoole)youzan swoole branch

## å‚è€ƒ

- [Concise Guide to Swooleæ–‡æ¡£](https://linkeddestiny.gitbooks.io/easy-swoole/content/)
- [](https://www.gitbook.com/book/linkeddestiny/easy-swoole)
- [æºç åˆ†æ](https://github.com/LinkedDestiny/swoole-src-analysis)
- [å®˜æ–¹Wiki](https://wiki.swoole.com/)
